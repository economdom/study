# Анатомия gulpfile.js

*gulpfile.js* начинается из 4 основных методов - `task()`, `src()`, `watch()` и `dest()`. В 4-й версии Gulp добавились ещё два метода `series()` and `parallel()`. В дополнение к методам API gulp, каждая задача может использовать методы Node.js `pipe()`:

* `task()` - базовая обвёртка для каждого таска. Первый аргумент имя задачи, второй - функция, которая содержит код, который вы хотите запустить в данной задаче.
* `src()` - указывает путь к файлу/файлам, которые нужно модифицировать.
* `watch()` - следит за изменениями в указанных файлах.
* `dest()` - определяет место куда нужно складывать обработанные файлы. Наиболее часто используются папки *build* или `dist`.
* `parallel()` - позволяет легко управлять запуском плагинов - задачи будут запущенны вместе - все сразу.
* `series()` - позволяет легко управлять запуском плагинов - задачи будут запущенны последовательно - один за другим. Бывает очень важно чтобы определённая задача выполнялась, только после успешного выполнения предыдущей.
* `pipe()` - используется для создания цепочек функций для нашего такса. Порядок выполнения пайпов важен, так как функции выполняются одна за другой. Это даёт полный контроль над порядком выполнения функций.

## Включение модуля/плагина

Когда вы начинаете писать *gulpfile.js* в начале нужно указать включенных модулей или плагинов, которые будут использоватся в ваших задачах.

Gulp плагины - это небольшие Node.js приложения, созданные для использовая внутри Gulp, чтобы обеспечить узкоспециализированные действия, которые могут быть объеденены для создания комплексных операций с вашими данными.

Модули Node.js имеют более широкое применение и могут быть использованны вместе с Gulp или отдельно.

*gulpfile.js*

```
// Load Node Modules/Plugins
var gulp = require('gulp');
var concat = require('gulp-concat');
var uglify = require('gulp-uglify');
```

Мы используем Node.js метод `require()` куда передаём название установленного модуля. Вы присваивате вызов функции `require()` отдельным переменным для того чтобы их можно было использовать внутри *gulpfile.js*.

## Написание задачи

Все задачи Gulp имеют одинаковую структуру. Чтобы лучше понять как они работают давайте рассмотрим голый пример задачи, который будет основой для всех остальных задач.

```
gulp.task(name, function() {
  return gulp.src(path)
    .pipe(plugin)
    .pipe(plugin)
    .pipe(gulp.dest(path));
});
```

Функция `task()` определяем путь к исходным `gulp.src(path)` и выходным файлам `gulp.dest(path)`, а также любые другие действия установленных плагинов `.pipe(plugin)`. Несколько пайпов образовуют цепочку пайпов, которые выполняются один за другим по очереди.