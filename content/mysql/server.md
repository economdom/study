# Работа с сервером

Для того чтобы начать работать с сервером БД MySQL, его сначала нужно запустить. Это можно сделать из командрой строки или двойным кликом по утилите *mysqld.exe*, которая находится по адресу для XAMPP - *\mysql\bin*, для OpenServer - *modules\database\MySQL-5.6\bin*. Можно также сделать эту утилитку службой и запускать с любого адреса. Команда для создания службы может быть следующей (путь к утилите, команда установки, название команды, путь к файлу конфигации).

```
"d:\Server\mysql\bin\mysqld" --install "mysqld" --defaults-file="d:\Server\mysql\bin\my.ini"
```

И некоторые команды.

```bash
net start mysqld
net stop mysqld
```

Общатся с сервером мы можем при помощи утилиты `mysql.exe`. Можно настроить путь для того чтобы быстро запускать данную утилиту. Заходим *Computer / Properties / Advanced system settings / Environment Variables / Path / Edit*

```
;d:\Server\mysql\bin\
```

Теперь пишем следующее (имя пользователя и пароль для доступа к серверу БД MySQL).

```bash
mysql -u root -p
```

Информация в реляционных базах данных хранится в виде двумерных таблиц. Двумерная таблица - это таблица, которая имеет столбцы и строки.

Набор признаков реляционных баз данных.


* Данные хранятся в двумерных таблицах, состоящих из столбоцов (поля) и строк (ряды)
* На пересещении столбца и строки содержится только одно значение
* Каждое поле (столбец) имеет своё имя
* Все значения содержащиеся в определённом поле принадлежат к одному и тому же типу (строки, числа, дата и время)
* Столбцы (поля) расположены в порядке определённом при создании таблицы и должно быть как минимум одно поле
* Сервер возвращает результат запроса в виде таблиц

Для сервера БД важно такое понятие как целосность информации, что хранится в базе данных.

Если у нас имеются две полностью идентичные записи в БД, то возникает потребность уникализировать каждую из данных записей. Для этих целей в БД существуют так называемые ключи.

**Первичный ключ** (*англ.* Primary Key) - это параметр, который уникальным образом идентифицирует запись.

**Запись** - это один ряд в таблице БД.

У первичного ключа есть две основные характеристики - это уникальность и вечность. Под вечностью имеется в виду что запись таблице не может менять свой первичный ключ.

При создании новой базы данных, мы должны выбрать вариант сравнения кодировки. `utf8_bit` Unicode (multilingual), binary - учитывается регистр символов, `utf8_general_ci` Unicode (multilingual), case-insensitive - это регистронезависимый режим сравнения. Способы сравнения можно выбирать не только для всей базы данных, но и для отдельного поля. Для полей логина и пароля необходимо выбирать регистрозависимый режим сравнения.

Для создания новой базы данных необходимо указать название, кодировку и вариант сравнения кодировки.

```
CREATE DATABASE `sql`
DEFAULT CHARACTER SET utf8
COLLATE utf8_general_ci;
```

В самом верху панели phpMyAdmin находятся хлебные крошки, которые отображают сервер БД, выбранную БД и выбранную таблицу в этой базе данных.

Как уже говорилось ранее сервер баз данных MySQL поддерживает 3 основых типов данных, а те в свою очередь имеет ещё по несколько подтипов.

Существует несколько характеристик каждого поля.


* `Default` - позволяет указать значение для данного поля по умолчанию.
* `Collation` - позвляет указать сравнение кодировок отдельно для каждого поля.
* `Null` - укажет на то что в данном поле будет хранится пустое значение.
* `Index` - позволят задать ключи для поля.
* `A-I` - (*сокр.* Auto Increment) указывает на то что сервер будет автоматически заполнять это поле.
* `Comments` - позволяет задать комментарий для отдельного поля.
* `MIME type` - тип данных, которые можно хранить в данном поле.
* `Browser transformation` - связанно с преоразованием типов данных
* `Storage Engine` - движок базы данных

Все операторы SQL должны указыватся в верхнем регистре.

Создадим 2 таблицы, первая для продавцов, вторая для покупателей.

```
CREATE TABLE `sql`.`salers`(
    `snum` INT NOT NULL,
    `sname` VARCHAR (50) NOT NULL,
    `city` VARCHAR (50) NOT NULL,
    `comm` DECIMAL (3, 2) NOT NULL,
    PRIMARY KEY (`snum`)
) ENGINE = MYISAM;

CREATE TABLE `sql`.`customers`(
    `cnum` INT NOT NULL,
    `cname` VARCHAR (50) NOT NULL,
    `city` VARCHAR (50) NOT NULL,
    `rating` INT NOT NULL,
    `snum` INT NOT NULL,
    PRIMARY KEY (`cnum`)
) ENGINE = MYISAM;
```

Отобразим все БД, выберем необходимую нам и отобразим её поля.

```
SHOW DATABASES;
USE sql;
SHOW TABLES;
```

Создадим крайнюю таблицу с заказами.

```
CREATE TABLE `orders`(
    `onum` INT (11) NOT NULL,
    `amt` DECIMAL (6,2) NOT NULL,
    `odate` DATE NOT NULL,
    `cnum` INT (11) NOT NULL,
    `snum` INT (11) NOT NULL,
    PRIMARY KEY (`onum`)
) ENGINE = MYISAM;
```