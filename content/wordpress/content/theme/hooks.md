# Хуки - экшены и фильтры

При загрузке страницы WordPress одна за одной выполняются множество функций, часть из которых являются **хуками**. Для того чтобы мы могли расширять возможности WordPress без необходимости изменять ядро предоставляет различные API. В основе расширения возможностей WordPress лежит система хуков или крючков.

**Хуки** - это стандартные функции WordPress, на которые мы можем прицепить другую функцию (callback функция обратного вызова), которая будет выполнять для нас какие-то дополнительные полезные действия и срабатывать перед тем как выполнится та функция, на которую мы навесили эту функцию (хук). Например у нас есть стандартная функция `the_content()` которая просто выводит содержимое страницы или поста, а мы можем повесить/прицепить ещё одну функцию, которая например будет как-то изменять содержимое страницы перед тем как вывести его на экран.

Хуки бывают двух видов - фильтры и экшены. **Фильтры** просто принимают какой-то контент и могут его как-то изменять (изменение контента поста перед отправкой пользователю и т. д.). **Экшены** могут выполнять любые действия, которые мы поместим в нашу пользовательскую функцию (вывод контента, запись в файл, изменение БД и т. д.). С программной точки зрения и фильтры и экшены представляют собой одно и тоже, но разделяются условно по типу выполняемой работы.

```php
add_filter( $tag, $function_to_add, $priority, $accepted_args );
add_action( $tag, $function_to_add, $priority, $accepted_args );
```

* `$tag` - название той функции к которой мы хотим прицепится
* `$function_to_add` - функция, которую мы хотим добавить к текущей функции
* `$priority` - приоритет выполнения функции для данного хука
* `$accepted_args` - количество принимаемых аргументов

Мы должны описать ту функцию, которую мы навешиваем. В параметр мы передаём то значение которое возвращает функция к которой мы цепляемся - в данном случаем мы используем функцию `the_title()`, поэтому наша функция будет возвращать заголовок страницы или поста.

*functions.php*

```php
function test_title_filter($title){
    // custom code here...
}

add_filter( 'the_title', 'test_title_filter');
```

Если мы оставим функцию в таком виде, а затем обновим главную страницу сайта, то мы увидим что на всём сайте пропали заголовки. Так вышло потому что наш фильтр должен в любом случае возвращать какой-то результат.

Давайте теперь просто добавим к нашему заголовку кавычки:

*functions.php*

```php
function test_title_filter($title){
    return '&laquo; ' . $title . ' &raquo;';
}

add_filter( 'the_title', 'test_title_filter');
```

Система хуков используется также и в других CMS, например Drupal и OpenCart, а принцип их использования очень похож на систему колбэк функций в JavaScript/jQuery.
