## Использование AJAX запросов в WordPress

AJAX запросы в WordPress работаю с хуком `wp_ajax_{action}` для авторизованных пользователей и `wp_ajax_nopriv_{action}` для не авторизованных пользователей. `{action}`- это динамическая часть именования хука, которая свяжет наш запрос с нашим хуком. На вашем сайте может быть множество AJAX запросов, при этом их все обрабатывает один и тот же файл *wp-admin/admin-ajax.php* и этот файл все эти запросы должен перенаправлять к соответсвующим функциям, которые будут обрабатывать эти запросы и чтобы понять какой запрос и куда нужно отправить как раз и используется `{action}`, который мы будем передавать в качестве аргумента в нашем AJAX запросе и файл *wp-admin/admin-ajax.php* просто сравнивает экшн из AJAX запроса с тем, которым мы укажем в хуках `wp_ajax{action}` и `wp_ajax_nopriv_{action}` и если находит этот запрос, то отправляет его в нужную функцию.

Когда мы работаем в адмике, то в качестве обработчика запроса мы можем использовать специальную переменную `ajax_url`, которая будет указывать на файл *wp-admin/admin-ajax.php*, при этом эта переменная доступна только в админке и не доступна в пользовательской части - в этом легко убедится, если открыть исходный код админки, то мы найдём примерно такой фрагмент кода:

```js
var ajaxurl = '/wp-admin/admin-ajax.php',
    pagenow = 'dashboard',
    typenow = '',
    adminpage = 'index-php',
    thousandsSeparator = ',',
    decimalPoint = '.',
    isRtl = 0;
```

Поэтому нам нужно позаботится о том чтобы в нашем скрипте указать нужный нам адрес *wp-admin/admin-ajax.php*.